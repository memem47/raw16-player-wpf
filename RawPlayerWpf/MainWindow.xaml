<Window x:Class="RawPlayerWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RAW16 Player" Height="800" Width="1200">
    <Grid>
        <!-- 左:ビュー / 右:操作パネル -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="360"/>
        </Grid.ColumnDefinitions>

        <!-- 下にフッター -->
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- =========================
             Viewer Area (Left)
             ========================= -->
        <Border Grid.Row="0" Grid.Column="0" Margin="8"
                BorderBrush="Gray" BorderThickness="1" Background="Black">
            <Viewbox Stretch="Uniform">
                <Image x:Name="Img" SnapsToDevicePixels="True" />
            </Viewbox>
        </Border>

        <!-- =========================
             Control Panel (Right)
             ========================= -->
        <Border Grid.Row="0" Grid.Column="1" Margin="8"
                BorderBrush="#444" BorderThickness="1" Background="#111" Padding="10">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>

                    <TextBlock Text="Controls" Foreground="White" FontSize="16" Margin="0,0,0,10"/>

                    <!-- Folder / Playback -->
                    <GroupBox Header="Input / Playback" Foreground="White" Margin="0,0,0,10">
                        <StackPanel Margin="8">
                            <Button Content="フォルダ選択" Height="30" Click="BtnSelectFolder_Click"/>

                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                <Button Content="再生" Width="70" Margin="0,0,6,0" Click="BtnPlay_Click"/>
                                <Button Content="停止" Width="70" Margin="0,0,6,0" Click="BtnStop_Click"/>
                                <CheckBox x:Name="ChkLoop" Content="ループ" IsChecked="True"
                                          Foreground="White" VerticalAlignment="Center"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                <Button Content="前" Width="60" Margin="0,0,6,0" Click="BtnPrev_Click"/>
                                <Button Content="次" Width="60" Click="BtnNext_Click"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                <TextBlock Text="FPS" Width="50" Foreground="White" VerticalAlignment="Center"/>
                                <TextBox x:Name="TxtFps" Width="80" Text="30" Margin="6,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- Image Size -->
                    <GroupBox Header="Image Size" Foreground="White" Margin="0,0,0,10">
                        <StackPanel Margin="8">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="W" Width="50" Foreground="White" VerticalAlignment="Center"/>
                                <TextBox x:Name="TxtW" Width="100" Text="512" Margin="6,0,0,0"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                <TextBlock Text="H" Width="50" Foreground="White" VerticalAlignment="Center"/>
                                <TextBox x:Name="TxtH" Width="100" Text="512" Margin="6,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- Window/Level -->
                    <GroupBox Header="Window / Level (WL/WW)" Foreground="White" Margin="0,0,0,10">
                        <StackPanel Margin="8">

                            <TextBlock Text="WL" Foreground="White"/>
                            <Slider x:Name="SldWL"
                                    Minimum="0" Maximum="65535" Value="20000"
                                    ValueChanged="SldWL_ValueChanged"/>
                            <TextBlock x:Name="TxtWL" Text="20000" Foreground="White" Margin="0,2,0,8"/>

                            <TextBlock Text="WW" Foreground="White"/>
                            <Slider x:Name="SldWW"
                                    Minimum="1" Maximum="65535" Value="40000"
                                    ValueChanged="SldWW_ValueChanged"/>
                            <TextBlock x:Name="TxtWW" Text="40000" Foreground="White" Margin="0,2,0,8"/>

                            <Button Content="Reset WL/WW" Height="28" Click="BtnResetWlWw_Click"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Processing -->
                    <GroupBox Header="Processing" Foreground="White">
                        <StackPanel Margin="8">
                            <CheckBox x:Name="ChkDenoise" Content="Denoise(Box3x3)" IsChecked="False"
                                      Foreground="White" Margin="0,0,0,6"/>
                            <TextBlock x:Name="TxtProcMs" Foreground="White"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Status -->
                    <TextBlock Text="Status" Foreground="White" FontSize="14" Margin="0,14,0,6"/>
                    <TextBlock x:Name="TxtStatus" Foreground="White" TextWrapping="Wrap"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- =========================
             Footer
             ========================= -->
        <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                   Margin="8" Foreground="Gray"
                   Text="RAW16 (little-endian) / WL/WW表示。フォルダを選択して再生。"/>
    </Grid>
</Window>
